# saikyo-todo-app

最強の TODO アプリ

- 前提として TODO アプリ使わない派
- 「最強に実用性のない TODO アプリ」になりました

## 機能紹介

以下 3 つのみ実装してます。

- todo の登録
- 完了・未完了の切り替え
- todo の削除

ログイン機能とか todo の内容更新機能とかは実装してません！！！

## アーキテクチャ

### ホスティング

- cloudflare pages & cloudflare pages functions
  - サーバレスで統一したかったので選択した

### フレームワーク

- vite, hono
  - Vite を使って見たかったので選択した
  - cloudflare と相性のいい hono を選択した

### ui

- react
- tailwind

### test

- storybook
- jest

## ディレクトリ構成

```sh
.
└── src
    ├── client         # フロント側のコード
    │   ├── api          # APIの呼び出し
    │   ├── components   # UIコンポーネント
    │   ├── lib          # 汎用的な関数を置く
    │   └── pages        # ページ
    └── server         # サーバー側のコード
        └── model.ts     # APIの実装
```

## アプリのこだわった点と反省点とか

### スプラッシュスクリーン

Web サイトに訪れた際、最初に表示されるアニメーションをスプラッシュスクリーン(アニメーション)というらしい

#### こだわった点

- ライブラリではなく CSS で自作した
- グリッチエフェクトを作ってみた

#### いまいちな点とか

- デザインセンスが無かった
- 凝ったアニメーションは tailwind だけじゃ難しいと分かった
- アニメーションのプロパティの勉強になった

### 無限スクロール

作成した TODO を無限スクロールできるようにした

#### こだわった点

- 無限スクロールを実装してみたかったのでライブラリを使わず自作した

#### いまいちな点とか

- TODO アプリに無限スクロールは絶対に要らないと思った
- 無限スクロールの実装の大変さが分かった

### アニメーション

ロゴを自作して軽いアニメーションをつけた

#### こだわった点

- Figma で SVG を作った

#### いまいちな点とか

- デザインセンスが無かった
- SVG にアニメーションを付けたことが無かったので勉強になった

## 実現できなかったこととか反省とか

### storybook にテストを寄せる

- 近頃、\*.stories.tsx にテストを書く記事をよく見るので導入したかった
- 理想としては以下のテストを storybook で完結させること
  - build in isolation
    - コンポーネント・モジュール単位でのテスト
  - visual regression
    - 1px のズレも許さない
  - interaction
    - ユーザー目線のテスト。クリックとか入力とか
  - accessibility
    - アクセシビリティに考慮したコードになっているか
  - user flow
    - シナリオに沿ったテスト
- \*.test.tsx から story の play()を呼び出したかったが上手くいかず
- カバレッジも上手く取れず
- 最適解を見つけていきたい

### ディレクトリ構成

- イイ感じの構成を作ったつもりだが、やはり不満点があった
- コロケーションは取り入れていいと思った
- 共通ファイルの置き場所とかは悩む
- 最適解を見つけていきたい

### ライブラリ

- 使ったことないライブラリをいっぱい使ったので中途半端になった感がある
- 勉強にはなった

## 開発
node v16
### 起動

```sh
npm i
```

```sh
npm run dev
```

### ローカルの DB の設定

※ cloudflare に登録が必要

ローカルに DB 作成  
※ 事前に一度 npm run dev しておくこと
```sh
npm run db:init -- --local
```

テーブル作成、データ投入
```sh
npm run db:create-table -- --local

npm run db:create-dummy-data -- --local
```
